# ğŸ“Š BÃ¡o cÃ¡o Benchmark ToÃ n diá»‡n: Redis vs Dragonfly
## Há»‡ thá»‘ng Rate Limiting dá»±a trÃªn In-Memory Store

<div align="center">

![Benchmark](https://img.shields.io/badge/Benchmark-Rate%20Limiting-blue?style=for-the-badge)
![Redis](https://img.shields.io/badge/Redis-7.x-red?style=for-the-badge&logo=redis)
![Dragonfly](https://img.shields.io/badge/Dragonfly-Latest-green?style=for-the-badge)
![Status](https://img.shields.io/badge/Status-Completed-success?style=for-the-badge)

**NgÃ y thá»±c hiá»‡n**: ThÃ¡ng 1-2, 2026  
**TÃ¡c giáº£**: PhongHV
**PhiÃªn báº£n**: 1.0

</div>

---

## ğŸ“‘ Má»¥c lá»¥c

1. [ğŸ¯ Tá»•ng quan dá»± Ã¡n](#1--tá»•ng-quan-dá»±-Ã¡n)
2. [ğŸ—ï¸ Kiáº¿n trÃºc há»‡ thá»‘ng & Testbed](#2-ï¸-kiáº¿n-trÃºc-há»‡-thá»‘ng--testbed)
3. [ğŸ”¬ PhÆ°Æ¡ng phÃ¡p Benchmark](#3--phÆ°Æ¡ng-phÃ¡p-benchmark)
4. [ğŸ“ˆ Káº¿t quáº£ chi tiáº¿t: Redis Single Node](#4--káº¿t-quáº£-chi-tiáº¿t-redis-single-node)
5. [ğŸ“ˆ Káº¿t quáº£ chi tiáº¿t: Dragonfly Single Node](#5--káº¿t-quáº£-chi-tiáº¿t-dragonfly-single-node)
6. [âš”ï¸ So sÃ¡nh trá»±c tiáº¿p Redis vs Dragonfly](#6-ï¸-so-sÃ¡nh-trá»±c-tiáº¿p-redis-vs-dragonfly)
7. [ğŸ” PhÃ¢n tÃ­ch chuyÃªn sÃ¢u](#7--phÃ¢n-tÃ­ch-chuyÃªn-sÃ¢u)
8. [ğŸš€ Khuyáº¿n nghá»‹ Production](#8--khuyáº¿n-nghá»‹-production)
9. [âœ… Káº¿t luáº­n](#9--káº¿t-luáº­n)

---

## ğŸ“Œ Executive Summary

<div align="center">

### ğŸ† Káº¿t quáº£ chÃ­nh

| Metric | Redis | Dragonfly | Cáº£i thiá»‡n |
|:------:|:-----:|:---------:|:---------:|
| **Max RPS (Uniform)** | 20,000 | 27,500 | **ğŸ”º +37.5%** |
| **Max RPS (Hot Key)** | 17,500 | 22,500 | **ğŸ”º +28.6%** |
| **P99 Latency @17.5k** | 160ms | 24ms | **ğŸ”º 6.6x faster** |
| **Failure Pattern** | Collapse Ä‘á»™t ngá»™t | Graceful degradation | **âœ… Resilient** |

</div>

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         ğŸ¯ BOTTOM LINE                                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘   Dragonfly cho tháº¥y hiá»‡u nÄƒng vÆ°á»£t trá»™i so vá»›i Redis trong má»i ká»‹ch báº£n:    â•‘
â•‘                                                                               â•‘
â•‘   âœ… Throughput cao hÆ¡n 28-37%                                                â•‘
â•‘   âœ… Latency tháº¥p hÆ¡n 2-7 láº§n                                                 â•‘
â•‘   âœ… Failure pattern "má»m" hÆ¡n, cho phÃ©p há»‡ thá»‘ng pháº£n á»©ng ká»‹p thá»i          â•‘
â•‘                                                                               â•‘
â•‘   ğŸ‘‰ KHUYáº¾N NGHá»Š: Náº¿u Ä‘ang dÃ¹ng Redis vá»›i >15k RPS, hÃ£y cÃ¢n nháº¯c Dragonfly   â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## 1. ğŸ¯ Tá»•ng quan dá»± Ã¡n

### 1.1 Má»¥c tiÃªu nghiÃªn cá»©u

Dá»± Ã¡n nÃ y nháº±m **Ä‘Ã¡nh giÃ¡ toÃ n diá»‡n nÄƒng lá»±c** cá»§a hai há»‡ thá»‘ng in-memory store phá»• biáº¿n â€” **Redis** vÃ  **Dragonfly** â€” khi Ä‘Æ°á»£c sá»­ dá»¥ng lÃ m backend cho há»‡ thá»‘ng Rate Limiting trong mÃ´i trÆ°á»ng microservices.

![alt text](image-1.png)

**CÃ¢u há»i nghiÃªn cá»©u chÃ­nh**:

| # | CÃ¢u há»i | ÄÃ£ tráº£ lá»i |
|:-:|---------|:----------:|
| 1 | Throughput tá»‘i Ä‘a mÃ  má»—i há»‡ thá»‘ng cÃ³ thá»ƒ xá»­ lÃ½ lÃ  bao nhiÃªu? | âœ… |
| 2 | Há»‡ thá»‘ng pháº£n á»©ng nhÆ° tháº¿ nÃ o vá»›i cÃ¡c pattern traffic khÃ¡c nhau? | âœ… |
| 3 | ÄÃ¢u lÃ  ngÆ°á»¡ng an toÃ n cho mÃ´i trÆ°á»ng production? | âœ… |
| 4 | Dragonfly cÃ³ pháº£i lÃ  giáº£i phÃ¡p thay tháº¿ tá»‘t hÆ¡n Redis khÃ´ng? | âœ… |

### 1.2 Pháº¡m vi benchmark

| KhÃ­a cáº¡nh | Pháº¡m vi |
|-----------|---------|
| **Backends Ä‘Æ°á»£c test** | Redis 7.x (Single Node), Dragonfly (Single Node) |
| **Dáº£i RPS** | 10,000 - 30,000 RPS |
| **Ká»‹ch báº£n phÃ¢n phá»‘i key** | Single Key, 100 Keys (Uniform), 100 Keys (Hot Key 90/10) |
| **Thá»i gian má»—i step** | 30-60 giÃ¢y |
| **Metrics thu tháº­p** | Throughput, Latency (Avg, P95, P99), Error Rate, Resource Usage |

### 1.3 Táº¡i sao Rate Limiting quan trá»ng?

Rate Limiting lÃ  tuyáº¿n phÃ²ng thá»§ Ä‘áº§u tiÃªn báº£o vá»‡ há»‡ thá»‘ng khá»i:

| Má»‘i Ä‘e dá»a | MÃ´ táº£ | Impact náº¿u khÃ´ng cÃ³ Rate Limit |
|------------|-------|-------------------------------|
| **ğŸ”´ DDoS/Abuse** | Traffic Ä‘á»™c háº¡i lÃ m quÃ¡ táº£i | Service down, revenue loss |
| **ğŸŸ  Unfair Usage** | Má»™t tenant chiáº¿m háº¿t tÃ i nguyÃªn | Poor UX cho users khÃ¡c |
| **ğŸŸ¡ Cost Overrun** | VÆ°á»£t quota third-party APIs | Chi phÃ­ phÃ¡t sinh khÃ´ng kiá»ƒm soÃ¡t |
| **ğŸŸ¢ Cascade Failure** | Downstream quÃ¡ táº£i | ToÃ n há»‡ thá»‘ng sá»¥p Ä‘á»• |

---

## 2. ğŸ—ï¸ Kiáº¿n trÃºc há»‡ thá»‘ng & Testbed

### 2.1 Cáº¥u hÃ¬nh pháº§n cá»©ng

<div align="center">

| ğŸ–¥ï¸ ThÃ´ng sá»‘ | GiÃ¡ trá»‹ |
|:----------:|---------|
| **Há»‡ Ä‘iá»u hÃ nh** | macOS 26.2 (Build 25C56) |
| **CPU** | Apple M4 |
| **Sá»‘ core** | 10 cores (logic) |
| **RAM** | 24 GB |
| **Docker Engine** | 28.0.4 |

</div>

> âš ï¸ **LÆ°u Ã½**: Táº¥t cáº£ thÃ nh pháº§n (Backend, Proxy, App, Monitoring) Ä‘á»u cháº¡y trÃªn cÃ¹ng má»™t mÃ¡y qua Docker Compose. ÄÃ¢y lÃ  mÃ´i trÆ°á»ng "best-case" vá» network latency.

### 2.2 Kiáº¿n trÃºc tá»•ng quan
![alt text](kien_truc_tong_quan.png)

### 2.3 Chi tiáº¿t Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ğŸ”„ DATA PLANE                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚   Benchmark  â”‚         â”‚    Envoy     â”‚         â”‚  Spring Boot â”‚        â”‚
â”‚   â”‚    Client    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  gRPC Load   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   gRPC App   â”‚        â”‚
â”‚   â”‚   (Java)     â”‚  :9091  â”‚   Balancer   â”‚  :9090  â”‚  (2 instances)â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                             â”‚                â”‚
â”‚                                                             â–¼                â”‚
â”‚                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚                                                    â”‚ Redis/       â”‚          â”‚
â”‚                                                    â”‚ Dragonfly    â”‚          â”‚
â”‚                                                    â”‚   :6379      â”‚          â”‚
â”‚                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                            ğŸ“Š CONTROL PLANE                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚  Prometheus  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ Redis/DF     â”‚         â”‚   cAdvisor   â”‚        â”‚
â”‚   â”‚    :9090     â”‚         â”‚  Exporter    â”‚         â”‚    :8080     â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚          â”‚                                                                   â”‚
â”‚          â–¼                                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                           â”‚
â”‚   â”‚   Grafana    â”‚                                                           â”‚
â”‚   â”‚    :3000     â”‚                                                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 Chi tiáº¿t cÃ¡c thÃ nh pháº§n

| ThÃ nh pháº§n | CÃ´ng nghá»‡ | Vai trÃ² | Port |
|:----------:|-----------|---------|:----:|
| **ğŸ“± Benchmark Client** | Java 21 + gRPC | Sinh táº£i theo target RPS | - |
| **âš–ï¸ Load Balancer** | Envoy | Round-robin gRPC requests | 9091 |
| **ğŸ–¥ï¸ Application** | Spring Boot 3 + WebFlux + gRPC | Xá»­ lÃ½ logic rate limit | 9090 |
| **ğŸ“œ Rate Limit Logic** | Lua Script (INCR + EXPIRE) | Atomic counter | - |
| **ğŸ’¾ Backend Store** | Redis 7.x / Dragonfly | LÆ°u trá»¯ counter | 6379 |
| **ğŸ“Š Monitoring** | Prometheus + Grafana | Thu tháº­p & visualize metrics | 9090, 3000 |

### 2.5 Rate Limit Algorithm (Fixed Window Counter)
![alt text](data_flow.png)

---

## 3. ğŸ”¬ PhÆ°Æ¡ng phÃ¡p Benchmark

### 3.1 CÃ¡c ká»‹ch báº£n test

ChÃºng tÃ´i thiáº¿t káº¿ **3 ká»‹ch báº£n** mÃ´ phá»ng cÃ¡c pattern traffic thá»±c táº¿:

![alt text](image.png)

#### Ká»‹ch báº£n 1: Single Key (Best Case)
| Äáº·c Ä‘iá»ƒm | MÃ´ táº£ |
|----------|-------|
| **Pattern** | 100% traffic â†’ 1 key duy nháº¥t |
| **MÃ´ phá»ng** | Extreme cache locality, minimal memory access |
| **Ká»³ vá»ng** | Throughput cao nháº¥t (CPU cache hit rate tá»‘i Æ°u) |
| **Thá»±c táº¿** | Hiáº¿m gáº·p trong production, Ä‘á»ƒ Ä‘o ceiling |

#### Ká»‹ch báº£n 2: Hundred Keys - Uniform Distribution
| Äáº·c Ä‘iá»ƒm | MÃ´ táº£ |
|----------|-------|
| **Pattern** | Traffic phÃ¢n bá»• Ä‘á»u cho 100 keys |
| **MÃ´ phá»ng** | Multi-tenant API vá»›i traffic cÃ¢n báº±ng |
| **Ká»³ vá»ng** | Throughput tháº¥p hÆ¡n do context switching |
| **Thá»±c táº¿** | Gáº§n vá»›i production cá»§a há»‡ thá»‘ng well-designed |

#### Ká»‹ch báº£n 3: Hundred Keys - Hot Key (90/10)
| Äáº·c Ä‘iá»ƒm | MÃ´ táº£ |
|----------|-------|
| **Pattern** | 90% traffic â†’ 1 key "hot", 10% â†’ 99 keys cÃ²n láº¡i |
| **MÃ´ phá»ng** | Viral event, popular user, API abuse |
| **Ká»³ vá»ng** | Throughput tháº¥p nháº¥t, failure nguy hiá»ƒm |
| **Thá»±c táº¿** | Worst-case scenario cáº§n plan for |

### 3.2 Quy trÃ¬nh benchmark

![alt text](image-2.png)

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         ğŸ”„ BENCHMARK WORKFLOW                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                             â•‘
â•‘   For each RPS level (10k â†’ 12.5k â†’ 15k â†’ ... â†’ 30k):                      â•‘
â•‘                                                                             â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â•‘
â•‘   â”‚   ğŸ”¥ Warmup â”‚â”€â”€â”€â–¶â”‚ ğŸ“Š Measure  â”‚â”€â”€â”€â–¶â”‚ â„ï¸ Cooldown â”‚                    â•‘
â•‘   â”‚   (5 sec)   â”‚    â”‚ (30-60 sec) â”‚    â”‚  (10 sec)   â”‚                    â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â•‘
â•‘                             â”‚                                               â•‘
â•‘                             â–¼                                               â•‘
â•‘                    ğŸ“‹ Record Metrics:                                       â•‘
â•‘                    â€¢ Actual RPS achieved                                    â•‘
â•‘                    â€¢ Success/Fail counts                                    â•‘
â•‘                    â€¢ Latency percentiles (P50, P95, P99)                   â•‘
â•‘                    â€¢ Resource utilization                                   â•‘
â•‘                                                                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### 3.3 Metrics thu tháº­p & ngÆ°á»¡ng cáº£nh bÃ¡o

| Metric | Ã nghÄ©a | ğŸŸ¢ Good | ğŸŸ¡ Warning | ğŸ”´ Critical |
|:------:|---------|:-------:|:----------:|:-----------:|
| **Actual RPS** | Throughput thá»±c táº¿ | â‰¥ 98% target | 95-98% | < 95% |
| **Fail %** | Tá»· lá»‡ request tháº¥t báº¡i | < 0.1% | 0.1-1% | > 1% |
| **Avg Latency** | Äá»™ trá»… trung bÃ¬nh | < 10ms | 10-50ms | > 50ms |
| **P95 Latency** | 95th percentile | < 50ms | 50-100ms | > 100ms |
| **P99 Latency** | 99th percentile | < 100ms | 100-200ms | > 200ms |

---

## 4. ğŸ“ˆ Káº¿t quáº£ chi tiáº¿t: Redis Single Node

### 4.1 Ká»‹ch báº£n Single Key

> **ğŸ“… Test Date**: January 27, 2026  
> **â±ï¸ Duration**: 30 giÃ¢y/step

<details>
<summary><b>ğŸ“Š Báº£ng káº¿t quáº£ chi tiáº¿t (Click Ä‘á»ƒ má»Ÿ)</b></summary>

| Target RPS | Actual RPS | Success | Fail | Fail % | Avg Latency | P95 | P99 | Status |
|:----------:|:----------:|--------:|-----:|-------:|------------:|----:|----:|:------:|
| 10,000 | 10,000 | 300,000 | 0 | 0% | 0.94ms | 1.74ms | **6.26ms** | âœ… |
| 12,500 | 12,500 | 374,987 | 0 | 0% | 0.98ms | 1.54ms | **3.71ms** | âœ… |
| 15,000 | 14,999 | 436,764 | 13,225 | 2.9% | 22.5ms | 19.9ms | **702ms** | âš ï¸ |
| 17,500 | 17,499 | 524,986 | 0 | 0% | 3.17ms | 11.0ms | **42.1ms** | âœ… |
| 20,000 | 19,999 | 564,317 | 35,664 | 5.9% | 67.5ms | 390ms | **667ms** | âš ï¸ |
| 22,500 | 22,499 | 646,903 | 28,081 | 4.2% | 42.6ms | 190ms | **873ms** | âš ï¸ |
| 25,000 | 24,997 | 749,964 | 0 | 0% | 19.5ms | 107ms | **234ms** | âš¡ |
| **27,500** | **27,456** | **824,930** | **0** | **0%** | **19.4ms** | **92.3ms** | **137ms** | **âš¡** |
| 30,000 | 28,718 | 458,166 | 441,809 | 49.1% | 751ms | 2.83s | **3.83s** | âŒ |

</details>

#### ğŸ“ˆ Biá»ƒu Ä‘á»“ Throughput & Latency

```
Throughput (RPS) vs Target RPS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

30k â”‚                                                              â•­â”€â”€â”€â”€â”€Ã— âŒ
    â”‚                                                         â•­â”€â”€â”€â”€â•¯ 49% fail
27.5â”‚                                                    â•­â”€â”€â”€â”€â—â•â•â•â•â•â•â•â•â•âš¡ PEAK
    â”‚                                               â•­â”€â”€â”€â”€â•¯
25k â”‚                                          â•­â”€â”€â”€â”€â—
    â”‚                                     â•­â”€â”€â”€â”€â•¯
22.5â”‚                                â•­â”€â”€â”€â”€â—
    â”‚                           â•­â”€â”€â”€â”€â•¯
20k â”‚                      â•­â”€â”€â”€â”€â—
    â”‚                 â•­â”€â”€â”€â”€â•¯
17.5â”‚            â•­â”€â”€â”€â”€â—
    â”‚       â•­â”€â”€â”€â”€â•¯
15k â”‚  â•­â”€â”€â”€â”€â—
    â”‚â”€â”€â•¯
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
       10k   12.5k   15k   17.5k   20k   22.5k   25k   27.5k   30k    Target

Legend: â— Achieved RPS    Ã— Failed    â•â•â• Optimal zone    âš¡ Peak performance
```

```
P99 Latency (ms) - Log Scale
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

4000msâ”‚                                                              â–“â–“â–“â–“â–“â–“â–“
      â”‚                                                              â–“â–“â–“â–“â–“â–“â–“
      â”‚                                                              â–“â–“â–“â–“â–“â–“â–“
1000msâ”‚                           â–‘â–‘â–‘â–‘                               â–“â–“â–“â–“â–“â–“â–“
      â”‚              â–‘â–‘â–‘â–‘        â–‘â–‘â–‘â–‘â–‘â–‘      â–‘â–‘â–‘â–‘
 500msâ”‚              â–‘â–‘â–‘â–‘        â–‘â–‘â–‘â–‘â–‘â–‘      â–‘â–‘â–‘â–‘
      â”‚              â–‘â–‘â–‘â–‘        â–‘â–‘â–‘â–‘â–‘â–‘      â–‘â–‘â–‘â–‘       â–ˆâ–ˆâ–ˆâ–ˆ
 200msâ”‚              â–‘â–‘â–‘â–‘        â–‘â–‘â–‘â–‘â–‘â–‘      â–‘â–‘â–‘â–‘       â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ
 100msâ”‚              â–‘â–‘â–‘â–‘        â–‘â–‘â–‘â–‘â–‘â–‘      â–‘â–‘â–‘â–‘       â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ
  50msâ”‚        â–ˆâ–ˆâ–ˆâ–ˆ  â–‘â–‘â–‘â–‘  â–ˆâ–ˆâ–ˆâ–ˆ  â–‘â–‘â–‘â–‘â–‘â–‘      â–‘â–‘â–‘â–‘       â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ
  10msâ”‚  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ                                     
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
         10k  12.5k  15k  17.5k  20k  22.5k  25k  27.5k  30k

Legend: â–ˆâ–ˆâ–ˆâ–ˆ Healthy (<100ms)   â–‘â–‘â–‘â–‘ Degraded (100-1000ms)   â–“â–“â–“â–“ Critical (>1s)
```

#### ğŸ“¸ Grafana Dashboard Screenshots

**Overview - Throughput, Latency & Container Resources**
![Dashboard Top Section](./single-node-redis/single_key_20260127_214303/report/grafana_dashboard_top_1769525455862.png)
*Figure 4.1: Clear ramp-up pattern tá»« 10k Ä‘áº¿n 30k RPS. Dramatic spike visible táº¡i 30k RPS step.*

**JVM & GC Pressure + Redis Performance**
![Dashboard Middle Section](./single-node-redis/single_key_20260127_214303/report/grafana_dashboard_middle_1769525500675.png)
*Figure 4.2: Redis latency spike táº¡i saturation point confirms Redis lÃ  bottleneck.*

**Redis Resources & Envoy Load Balancer**
![Dashboard Bottom Section](./single-node-redis/single_key_20260127_214303/report/grafana_dashboard_envoy_and_stats_1769525560378.png)
*Figure 4.3: Envoy RPS by Status cho tháº¥y error rate spikes rÃµ rÃ ng.*

#### ğŸ” Nháº­n xÃ©t

| Observation | Detail |
|-------------|--------|
| **ğŸ† Peak Performance** | 27,500 RPS vá»›i P99 < 140ms |
| **âš ï¸ Anomaly** | 15k, 20k, 22.5k cÃ³ failure táº¡m thá»i â†’ JVM warmup/GC |
| **ğŸ’¥ Breaking Point** | 30,000 RPS â†’ 49% failure, há»‡ thá»‘ng sá»¥p Ä‘á»• |

---

### 4.2 Ká»‹ch báº£n Hundred Keys - Uniform

> **ğŸ“… Test Date**: January 28, 2026  
> **â±ï¸ Duration**: 60 giÃ¢y/step (extended)

<details>
<summary><b>ğŸ“Š Báº£ng káº¿t quáº£ chi tiáº¿t (Click Ä‘á»ƒ má»Ÿ)</b></summary>

| Target RPS | Actual RPS | Success | Fail | Fail % | Avg Latency | P95 | P99 | Status |
|:----------:|:----------:|--------:|-----:|-------:|------------:|----:|----:|:------:|
| 10,000 | 10,000 | 600,000 | 0 | 0% | 2.37ms | 12.9ms | **29.8ms** | âœ… |
| 12,500 | 12,500 | 749,988 | 0 | 0% | 6.20ms | 30.5ms | **41.5ms** | âœ… |
| 15,000 | 15,000 | 899,998 | 0 | 0% | 8.82ms | 37.3ms | **51.1ms** | âœ… |
| 17,500 | 17,499 | 1,049,975 | 0 | 0% | 12.3ms | 45.1ms | **60.0ms** | âœ… |
| **20,000** | **19,990** | **1,199,995** | **0** | **0%** | **23.5ms** | **77.1ms** | **110ms** | **âœ…** |
| 22,500 | 22,159 | 990,129 | 359,867 | **26.6%** | 418ms | 1.38s | **1.62s** | âŒ |
| 25,000 | 16,077 | 273,861 | 1,222,710 | **81.7%** | 18.1s | 52.2s | **63.8s** | ğŸ’€ |
| 27,500 | 9,980 | 240,142 | 1,409,832 | **85.4%** | 45.1s | 119s | **134s** | ğŸ’€ |
| 30,000 | 4,755 | 182,209 | 1,617,780 | **89.9%** | 173s | 340s | **356s** | ğŸ’€ |

</details>

#### ğŸ“ˆ Failure Rate Progression

```
Failure Rate (%) vs RPS - Redis 100 Keys Uniform
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

100% â”‚                                          â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“
     â”‚                                     â–“â–“â–“â–“â–“
 80% â”‚                                â–“â–“â–“â–“â–“
     â”‚                           â–“â–“â–“â–“â–“
 60% â”‚                      â–“â–“â–“â–“â–“
     â”‚                 â–“â–“â–“â–“â–“
 40% â”‚            â–“â–“â–“â–“â–“                         ğŸ’€ DEATH SPIRAL
     â”‚       â•­â”€â”€â”€â•¯                              - Latency â†‘ â†’ Timeout â†‘
 20% â”‚  â•­â”€â”€â”€â”€â•¯                                  - Timeout â†’ Backlog â†‘
     â”‚  â”‚                                       - Backlog â†’ More Timeout
  0% â”‚â•â•â—â•â•â•â•â•â•â—â•â•â•â•â•â•â—â•â•â•â•â•â•â—â•â•â•â•â•â•â—â•â•â•¯
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
        10k   12.5k   15k   17.5k   20k   22.5k   25k   27.5k   30k    RPS

     â”‚â—€â”€â”€â”€â”€â”€â”€ 0% Failure Zone â”€â”€â”€â”€â”€â”€â–¶â”‚â—€â”€â”€â”€â”€â”€â”€ Collapse Zone â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
```

#### ğŸ“¸ Grafana Dashboard Screenshots

**Overview - Throughput & Latency**
![100 Keys Top](./single-node-redis/hundred_keys_20260128_071830/report/grafana_100keys_top_1769944529346.png)
*Figure 4.4: Throughput stable Ä‘áº¿n 20k RPS, sau Ä‘Ã³ cliff drop.*

**JVM & Redis Performance**
![100 Keys Middle](./single-node-redis/hundred_keys_20260128_071830/report/grafana_100keys_middle_1769944574745.png)
*Figure 4.5: Redis latency tÄƒng exponential sau 20k RPS.*

**Envoy & Network Stats**
![100 Keys Bottom](./single-node-redis/hundred_keys_20260128_071830/report/grafana_100keys_bottom_1769944831436.png)
*Figure 4.6: Error rate visualization trÃªn Envoy dashboard.*

#### ğŸ” Nháº­n xÃ©t

| Observation | Detail |
|-------------|--------|
| **ğŸ† Stable Limit** | 20,000 RPS vá»›i 0% failure |
| **ğŸ§± Hard Wall Effect** | VÆ°á»£t 22.5k â†’ collapse khÃ´ng há»“i phá»¥c |
| **ğŸ“Š Latency** | Cao hÆ¡n Single Key (30ms vs 6ms táº¡i 10k) |

---

### 4.3 Ká»‹ch báº£n Hundred Keys - Hot Key (90/10)

> **ğŸ“… Test Date**: February 1, 2026  
> **â±ï¸ Duration**: 60 giÃ¢y/step

<details>
<summary><b>ğŸ“Š Báº£ng káº¿t quáº£ chi tiáº¿t (Click Ä‘á»ƒ má»Ÿ)</b></summary>

| Target RPS | Actual RPS | Success | Fail | Fail % | Avg Latency | P95 | P99 | Status |
|:----------:|:----------:|--------:|-----:|-------:|------------:|----:|----:|:------:|
| 10,000 | 9,997 | 600,000 | 0 | 0% | 3.08ms | 19.7ms | **36.4ms** | âœ… |
| 12,500 | 12,493 | 749,989 | 0 | 0% | 12.7ms | 45.4ms | **66.4ms** | âœ… |
| 15,000 | 15,000 | 900,000 | 0 | 0% | 18.1ms | 59.0ms | **83.6ms** | âœ… |
| **17,500** | **17,494** | **1,049,995** | **0** | **0%** | **36.3ms** | **109ms** | **160ms** | **âš¡** |
| 20,000 | 13,873 | 306,231 | 893,757 | **74.5%** | 12.4s | 38.0s | **49.1s** | ğŸ’€ |
| 22,500 | 11,835 | 117,865 | 1,231,898 | **91.3%** | 30.9s | 76.3s | **83.4s** | ğŸ’€ |
| 25,000 | 6,031 | 207,837 | 1,248,614 | **85.7%** | 110s | 215s | **228s** | ğŸ’€ |

</details>

#### ğŸ“ˆ Catastrophic Failure Pattern

```
                    ğŸ”¥ HOT KEY FAILURE - SUDDEN DEATH PATTERN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Failure%â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   100  â”‚                        â”‚ ğŸ’€ğŸ’€ğŸ’€ TOTAL COLLAPSE ğŸ’€ğŸ’€ğŸ’€
        â”‚                        â”‚
    80  â”‚                     â•­â”€â”€â”¤  No gradual degradation!
        â”‚                     â”‚  â”‚  System goes from healthy â†’ dead instantly
    60  â”‚                  â•­â”€â”€â•¯  â”‚
        â”‚                  â”‚     â”‚
    40  â”‚               â•­â”€â”€â•¯     â”‚  WHY?
        â”‚               â”‚        â”‚  - Hot key serializes 90% of operations
    20  â”‚            â•­â”€â”€â•¯        â”‚  - Once queue builds up, everything blocks
        â”‚            â”‚           â”‚  - Timeout cascade â†’ total failure
     0  â”‚â•â•â•â•â•â•â•â•â•â•â•â•â—           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
           10k  12.5k 15k â”‚17.5kâ”‚ 20k   22.5k   25k   27.5k   30k
                          â”‚     â”‚
                     Safe Zone   Breaking Point
                                  (0% â†’ 74% instantly!)
```

#### ğŸ“¸ Grafana Dashboard Screenshots

**Overview - The Cliff at 20k**
![Hot Key Top](./single-node-redis/hundred_keys_hot_20260201_184238/report/grafana_hotkey_top_1769948240483.png)
*Figure 4.7: Sharp drop in throughput vÃ  massive spike in latency táº¡i 20k RPS step.*

**Resource Utilization**
![Hot Key Middle](./single-node-redis/hundred_keys_hot_20260201_184238/report/grafana_hotkey_middle_1769948331576.png)
*Figure 4.8: JVM Memory vÃ  CPU plateau khi application trá»Ÿ thÃ nh I/O bound.*

**Redis Performance**
![Hot Key Bottom](./single-node-redis/hundred_keys_hot_20260201_184238/report/grafana_hotkey_bottom_1769948343755.png)
*Figure 4.9: Redis latency spike correlate vá»›i application failure.*

#### ğŸ” Nháº­n xÃ©t

| Observation | Detail |
|-------------|--------|
| **ğŸ”´ Safe Limit** | Chá»‰ 17,500 RPS |
| **ğŸ’€ Catastrophic** | Táº¡i 20k â†’ 74.5% failure ngay láº­p tá»©c |
| **âš ï¸ Worst-Case** | Hot key lÃ  pattern nguy hiá»ƒm nháº¥t |

---

### 4.4 ğŸ“Š Tá»•ng há»£p káº¿t quáº£ Redis

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ”´ REDIS SINGLE NODE - CAPACITY SUMMARY                    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘   Scenario           â”‚ Safe Limit â”‚ Max Limit  â”‚ Breaking Point              â•‘
â•‘   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â•‘
â•‘   ğŸ¯ Single Key      â”‚  25,000    â”‚  27,500    â”‚  30,000 RPS                 â•‘
â•‘   ğŸ“Š 100 Keys Uniformâ”‚  18,000    â”‚  20,000    â”‚  22,500 RPS                 â•‘
â•‘   ğŸ”¥ 100 Keys Hot    â”‚  15,000    â”‚  17,500    â”‚  20,000 RPS                 â•‘
â•‘                                                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘   VISUAL CAPACITY BAR                                                         â•‘
â•‘   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â•‘
â•‘                                                                               â•‘
â•‘   ğŸ¯ Single Key       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘  27.5k / 30k        â•‘
â•‘   ğŸ“Š 100 Keys Uniform â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  20k / 30k          â•‘
â•‘   ğŸ”¥ 100 Keys Hot     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  17.5k / 30k        â•‘
â•‘                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â•‘
â•‘                       0      10k     20k     30k RPS                          â•‘
â•‘                                                                               â•‘
â•‘   Legend: â–ˆâ–ˆâ–ˆâ–ˆ Healthy capacity   â–‘â–‘â–‘â–‘ Beyond safe limit                     â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## 5. ğŸ“ˆ Káº¿t quáº£ chi tiáº¿t: Dragonfly Single Node

### 5.1 Ká»‹ch báº£n Hundred Keys - Uniform

> **ğŸ“… Test Date**: February 4, 2026  
> **â±ï¸ Duration**: 1 giÃ¢y/step (short burst test)

<details>
<summary><b>ğŸ“Š Báº£ng káº¿t quáº£ chi tiáº¿t (Click Ä‘á»ƒ má»Ÿ)</b></summary>

| Target RPS | Actual RPS | Success | Fail | Fail % | Avg Latency | P95 | P99 | Status |
|:----------:|:----------:|--------:|-----:|-------:|------------:|----:|----:|:------:|
| 10,000 | 9,988 | 9,998 | 0 | 0% | 3.28ms | 17.9ms | **30.4ms** | âœ… |
| 12,500 | 12,482 | 12,494 | 0 | 0% | 2.22ms | 8.01ms | **22.7ms** | âœ… |
| 15,000 | 14,980 | 14,995 | 0 | 0% | 1.55ms | 2.70ms | **12.4ms** | âœ… |
| 17,500 | 17,476 | 17,493 | 0 | 0% | 2.10ms | 5.92ms | **20.7ms** | âœ… |
| 20,000 | 19,947 | 19,987 | 0 | 0% | 10.2ms | 43.5ms | **59.4ms** | âœ… |
| 22,500 | 22,471 | 22,493 | 0 | 0% | 2.65ms | 7.62ms | **22.4ms** | âœ… |
| 25,000 | 24,722 | 24,994 | 0 | 0% | 82.8ms | 146ms | **154ms** | âš ï¸ |
| **27,500** | **27,456** | **27,483** | **0** | **0%** | **36.2ms** | **70.8ms** | **83.2ms** | **âœ…** |
| 30,000 | 26,376 | 26,889 | 3,100 | **10.3%** | 164ms | 283ms | **304ms** | âŒ |

</details>

#### ğŸ“ˆ Dragonfly vs Redis - Uniform Load Comparison

```
                    DRAGONFLY vs REDIS - 100 Keys Uniform
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        Throughput (RPS)
        â”‚
   30k  â”‚                                              â•­â”€â”€â”€â”€â”€â”€Ã— Dragonfly
        â”‚                                         â•­â”€â”€â”€â”€â•¯      (10% fail)
   27.5kâ”‚                                    â•­â”€â”€â”€â”€â—â•â•â•â•â•â•â•â•â•â•â•â•â•â•âš¡ DF Peak
        â”‚                               â•­â”€â”€â”€â”€â•¯
   25k  â”‚                          â•­â”€â”€â”€â”€â—
        â”‚                     â•­â”€â”€â”€â”€â•¯           Ã—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Redis Collapsed
   22.5kâ”‚                â•­â”€â”€â”€â”€â—           â•­â”€â”€â”€â•¯              (26% fail)
        â”‚           â•­â”€â”€â”€â”€â•¯           â•­â”€â”€â”€â•¯
   20k  â”‚      â•­â”€â”€â”€â”€â—â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â—â•â•â•â•â•â•â•âš¡ Redis Peak
        â”‚ â•­â”€â”€â”€â”€â•¯
   17.5kâ”‚â”€â”€â•¯
        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
           10k   12.5k   15k   17.5k   20k   22.5k   25k   27.5k   30k

        Legend: â•â• ğŸŸ¢ Dragonfly healthy    â”€â”€ ğŸ”´ Redis healthy
                Ã—  Failure point           âš¡ Peak performance
                
        ğŸ† Dragonfly: +37.5% more capacity than Redis
```

#### ğŸ” Nháº­n xÃ©t

| Observation | Detail |
|-------------|--------|
| **ğŸ† Stable Limit** | 27,500 RPS vá»›i 0% failure (Redis: 20,000 RPS) |
| **ğŸ“Š Latency Excellence** | P99 < 100ms táº¡i 27.5k RPS |
| **ğŸ“ˆ Capacity Gain** | +37.5% so vá»›i Redis |

---

### 5.2 Ká»‹ch báº£n Hundred Keys - Hot Key (90/10)

> **ğŸ“… Test Date**: February 5, 2026  
> **â±ï¸ Duration**: 60 giÃ¢y/step

<details>
<summary><b>ğŸ“Š Báº£ng káº¿t quáº£ chi tiáº¿t (Click Ä‘á»ƒ má»Ÿ)</b></summary>

| Target RPS | Actual RPS | Success | Fail | Fail % | Avg Latency | P95 | P99 | Status |
|:----------:|:----------:|--------:|-----:|-------:|------------:|----:|----:|:------:|
| 10,000 | 10,000 | 600,000 | 0 | 0% | 0.96ms | 1.16ms | **4.98ms** | âœ… |
| 12,500 | 12,500 | 749,991 | 0 | 0% | 1.17ms | 1.82ms | **6.12ms** | âœ… |
| 15,000 | 15,000 | 899,987 | 0 | 0% | 1.54ms | 2.60ms | **10.18ms** | âœ… |
| 17,500 | 17,499 | 1,049,986 | 0 | 0% | 2.34ms | 4.60ms | **24.27ms** | âœ… |
| 20,000 | 19,999 | 1,199,982 | 0 | 0% | 4.29ms | 14.37ms | **42.05ms** | âœ… |
| **22,500** | **22,499** | **1,349,989** | **0** | **0%** | **7.51ms** | **28.98ms** | **54.62ms** | **âš¡** |
| 25,000 | 24,998 | 1,460,145 | 39,831 | **2.65%** | 94.98ms | 276ms | **358ms** | âš ï¸ |
| 27,500 | 27,478 | 1,505,433 | 144,533 | **8.76%** | 106.9ms | 324ms | **420ms** | âŒ |
| 30,000 | 28,880 | 704,778 | 1,095,190 | **60.8%** | 1.26s | 3.30s | **4.66s** | ğŸ’€ |

</details>

#### ğŸ“ˆ Graceful Degradation Pattern

```
                    DRAGONFLY vs REDIS - Hot Key Failure Pattern
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Failure %â”‚
   100   â”‚                                                      â•­â”€â”€ Both Dead
         â”‚                                                 â•­â”€â”€â”€â”€â•¯
    80   â”‚                       â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
         â”‚                  â•­â”€â”€â”€â”€â•¯ ğŸ”´ Redis
    60   â”‚             â•­â”€â”€â”€â”€â•¯      (Sudden death at 20k)          â•­â”€â”€ Dragonfly
         â”‚        â•­â”€â”€â”€â”€â•¯                                     â•­â”€â”€â”€â”€â•¯
    40   â”‚   â•­â”€â”€â”€â”€â•¯                                     â•­â”€â”€â”€â”€â•¯
         â”‚   â”‚                                     â•­â”€â”€â”€â”€â•¯
    20   â”‚   â”‚                                â•­â”€â”€â”€â”€â•¯
         â”‚   â”‚                           â•­â”€â”€â”€â”€â•¯ ğŸŸ¢ Dragonfly
    10   â”‚   â”‚                      â•­â”€â”€â”€â”€â•¯      (Gradual degradation)
         â”‚   â”‚                 â•­â”€â”€â”€â”€â—
     0   â”‚â•â•â•â—â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¯    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
            10k  12.5k 15k 17.5k 20k  22.5k 25k  27.5k  30k
                          â”‚      â”‚       â”‚
                          â”‚      â”‚       â””â”€ ğŸŸ¢ DF starts failing (2.6%)
                          â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ”´ Redis DEAD (74%)  
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸŸ¢ DF still healthy (0%)

         KEY INSIGHT: Dragonfly provides "Golden Time" for reaction
         - Redis: 0% â†’ 74% failure (instant death)
         - Dragonfly: 0% â†’ 2.6% â†’ 8.7% â†’ 60% (gradual, actionable)
```

#### ğŸ“¸ Grafana Dashboard Screenshot

**Overview - Hot Key Test**
![Dragonfly Hot Key](./single-node-dragonfly/hundred_keys_hot_20260204_184238/screenshot_01-10-09%205_2_2026.png)
*Figure 5.1: Dragonfly maintains stability up to 22.5k RPS under hot key load.*

#### ğŸ” Nháº­n xÃ©t

| Observation | Detail |
|-------------|--------|
| **ğŸ† Stable Limit** | 22,500 RPS vá»›i 0% failure (Redis: 17,500 RPS) |
| **ğŸ“ˆ Graceful Degradation** | Failure tÄƒng tá»« tá»« (2.6% â†’ 8.7% â†’ 60.8%) |
| **âš¡ Latency Superiority** | Táº¡i 17.5k: 24ms vs Redis 160ms (**6.6x faster**) |

---

### 5.3 ğŸ“Š Tá»•ng há»£p káº¿t quáº£ Dragonfly

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  ğŸŸ¢ DRAGONFLY SINGLE NODE - CAPACITY SUMMARY                  â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘   Scenario           â”‚ Safe Limit â”‚ Max Limit  â”‚ Breaking Point              â•‘
â•‘   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â•‘
â•‘   ğŸ“Š 100 Keys Uniformâ”‚  25,000    â”‚  27,500    â”‚  30,000 RPS                 â•‘
â•‘   ğŸ”¥ 100 Keys Hot    â”‚  20,000    â”‚  22,500    â”‚  25,000 RPS                 â•‘
â•‘                                                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘   VISUAL CAPACITY BAR                                                         â•‘
â•‘   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â•‘
â•‘                                                                               â•‘
â•‘   ğŸ“Š 100 Keys Uniform â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘  27.5k / 30k       â•‘
â•‘   ğŸ”¥ 100 Keys Hot     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  22.5k / 30k       â•‘
â•‘                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â•‘
â•‘                       0      10k     20k     30k RPS                          â•‘
â•‘                                                                               â•‘
â•‘   Legend: â–ˆâ–ˆâ–ˆâ–ˆ Healthy capacity   â–‘â–‘â–‘â–‘ Beyond safe limit                     â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## 6. âš”ï¸ So sÃ¡nh trá»±c tiáº¿p Redis vs Dragonfly

### 6.1 ğŸ“Š Throughput Comparison

![alt text](image-11.png)

| Ká»‹ch báº£n | Redis Safe | Dragonfly Safe | ğŸ“ˆ Improvement | Redis Max | Dragonfly Max | ğŸ“ˆ Improvement |
|:--------:|:----------:|:--------------:|:--------------:|:---------:|:-------------:|:--------------:|
| **100 Keys (Uniform)** | 18,000 | 25,000 | **+38.9%** | 20,000 | 27,500 | **+37.5%** |
| **100 Keys (Hot Key)** | 15,000 | 20,000 | **+33.3%** | 17,500 | 22,500 | **+28.6%** |

### 6.2 âš¡ Latency Comparison (P99 at Comparable Load)

```
                    P99 LATENCY COMPARISON (ms) - Lower is Better
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                 Redis                              Dragonfly
                 â”€â”€â”€â”€â”€                              â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 
@ 10k RPS        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
(Uniform)        29.8ms                            30.4ms
                                                   ~Same

@ 17.5k RPS      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
(Uniform)        60.0ms
                                         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
                                         20.7ms  (2.9x faster âš¡)

@ 20k RPS        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
(Uniform)        110ms
                                                              â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
                                                              59.4ms  (1.9x faster âš¡)

@ 17.5k RPS      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
(Hot Key)        160ms
                                       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
                                       24.27ms  (6.6x faster âš¡âš¡âš¡)

@ 20k RPS        ğŸ’€ COLLAPSED (49s P99)
(Hot Key)        
                                                           â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
                                                           42.05ms  (Redis failed! âš¡âš¡âš¡)
```

| Load Level | Redis P99 | Dragonfly P99 | ğŸ“ˆ Improvement |
|:----------:|:---------:|:-------------:|:--------------:|
| **10,000 RPS (Uniform)** | 29.8ms | 30.4ms | ~Same |
| **17,500 RPS (Uniform)** | 60.0ms | 20.7ms | **ğŸ”º 2.9x faster** |
| **20,000 RPS (Uniform)** | 110ms | 59.4ms | **ğŸ”º 1.9x faster** |
| **10,000 RPS (Hot Key)** | 36.4ms | 4.98ms | **ğŸ”º 7.3x faster** |
| **17,500 RPS (Hot Key)** | 160ms | 24.27ms | **ğŸ”º 6.6x faster** |
| **20,000 RPS (Hot Key)** | ğŸ’€ collapsed | 42.05ms | **ğŸ”º Redis failed!** |

### 6.3 ğŸ›¡ï¸ Failure Pattern Comparison

![alt text](image-3.png)

```
                    FAILURE RATE vs RPS (Hot Key Scenario)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Failure %â”‚                                              
   100   â”‚                                    â•­â”€â”€â”€â”€â”€â”€â”€ ğŸ”´ Redis
         â”‚                                 â•­â”€â”€â•¯        (Cliff failure)
    75   â”‚                              â•­â”€â”€â•¯
         â”‚                           â•­â”€â”€â•¯
    50   â”‚                        â•­â”€â”€â•¯
         â”‚                     â•­â”€â”€â•¯              â•­â”€â”€â”€â”€â”€ ğŸŸ¢ Dragonfly
    25   â”‚                  â•­â”€â”€â•¯             â•­â”€â”€â”€â•¯     (Gradual degradation)
         â”‚               â•­â”€â”€â•¯           â•­â”€â”€â”€â”€â•¯
    10   â”‚            â•­â”€â”€â•¯         â•­â”€â”€â”€â”€â•¯
         â”‚         â•­â”€â”€â•¯       â•­â”€â”€â”€â”€â—
     0   â”‚â•â•â•â•â•â•â•â•â•â—â•â•â•â•â•â•â•â•â•â•â•    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
           10k    15k    17.5k   20k    22.5k   25k   27.5k   30k  RPS

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š KEY INSIGHT: Failure Pattern Difference                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  ğŸ”´ REDIS:      0% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ 74% (instant death, no warning)              â”‚
â”‚                               â†‘                                              â”‚
â”‚                          No time to react!                                   â”‚
â”‚                                                                              â”‚
â”‚  ğŸŸ¢ DRAGONFLY:  0% â”€â”€â–¶ 2.6% â”€â”€â–¶ 8.7% â”€â”€â–¶ 60% (gradual, actionable)         â”‚
â”‚                       â†‘        â†‘         â†‘                                   â”‚
â”‚                    Alert!   Scale!   Circuit Break!                          â”‚
â”‚                                                                              â”‚
â”‚  ğŸ‘‰ Dragonfly cho "thá»i gian vÃ ng" Ä‘á»ƒ há»‡ thá»‘ng pháº£n á»©ng                     â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.4 ğŸ† Visual Summary - Head to Head

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ”´ REDIS vs ğŸŸ¢ DRAGONFLY - HEAD TO HEAD                    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  ğŸ“ˆ THROUGHPUT (100 Keys Uniform)                                             â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â•‘
â•‘  Redis      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  20,000 RPS       â•‘
â•‘  Dragonfly  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  27,500 RPS  +37% â•‘
â•‘                                                                               â•‘
â•‘  ğŸ“ˆ THROUGHPUT (100 Keys Hot Key)                                             â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â•‘
â•‘  Redis      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  17,500 RPS       â•‘
â•‘  Dragonfly  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  22,500 RPS  +29% â•‘
â•‘                                                                               â•‘
â•‘  âš¡ LATENCY @ 17.5k RPS (Hot Key)                                             â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â•‘
â•‘  Redis      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘  160ms P99      â•‘
â•‘  Dragonfly  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   24ms P99  6.6xâ¬‡â•‘
â•‘                                                                               â•‘
â•‘  ğŸ›¡ï¸ RESILIENCE (Failure Pattern)                                             â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â•‘
â•‘  Redis      âš ï¸ Catastrophic collapse (0% â†’ 74% instantly)     âŒ DANGEROUS   â•‘
â•‘  Dragonfly  âœ… Graceful degradation (gradual increase)        âœ… SAFE        â•‘
â•‘                                                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘                        ğŸ† WINNER: DRAGONFLY                                   â•‘
â•‘                                                                               â•‘
â•‘     "37% more throughput, 6.6x lower latency, graceful failure"              â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## 7. ğŸ” PhÃ¢n tÃ­ch chuyÃªn sÃ¢u

### 7.1 Táº¡i sao Dragonfly nhanh hÆ¡n?

#### ğŸ—ï¸ Kiáº¿n trÃºc Single-threaded vs Multi-threaded

![alt text](image-4.png)

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ”¬ ARCHITECTURE DEEP DIVE                                  â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  ğŸ”´ REDIS - Single-Threaded Event Loop                                       â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â•‘
â•‘                                                                               â•‘
â•‘     Client 1 â”€â”€â”                                                              â•‘
â•‘     Client 2 â”€â”€â”¼â”€â”€â–¶ [Single Event Loop] â”€â”€â–¶ [Single Data Store]              â•‘
â•‘     Client 3 â”€â”€â”˜         (1 CPU)                  (Global Lock)              â•‘
â•‘                                                                               â•‘
â•‘     âš ï¸ Problem: ALL operations serialize through ONE thread                   â•‘
â•‘     âš ï¸ CPU: Max utilization = 100% of 1 core                                 â•‘
â•‘                                                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  ğŸŸ¢ DRAGONFLY - Multi-Threaded Shared-Nothing                                â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â•‘
â•‘                                                                               â•‘
â•‘     Client 1 â”€â”€â–¶ [Thread 1] â”€â”€â–¶ [Shard 1]                                    â•‘
â•‘     Client 2 â”€â”€â–¶ [Thread 2] â”€â”€â–¶ [Shard 2]                                    â•‘
â•‘     Client 3 â”€â”€â–¶ [Thread 3] â”€â”€â–¶ [Shard 3]                                    â•‘
â•‘     Client 4 â”€â”€â–¶ [Thread 4] â”€â”€â–¶ [Shard 4]                                    â•‘
â•‘                    ...            ...                                         â•‘
â•‘                                                                               â•‘
â•‘     âœ… Advantage: Each thread owns its shard - NO LOCKS                       â•‘
â•‘     âœ… CPU: Utilization = 400-800% (M4 has 10 cores)                         â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

#### ğŸ“Š LÃ½ do cá»¥ thá»ƒ:

| Factor | ğŸ”´ Redis | ğŸŸ¢ Dragonfly | Impact |
|:------:|----------|--------------|--------|
| **CPU Utilization** | Max 1 core (~100%) | Multi-core (400-800%) | **4-8x potential** |
| **Memory Access** | Single-threaded GC | Per-shard memory | Less contention |
| **Lock Contention** | Global dict lock | Lock-free per shard | Better parallelism |
| **I/O Handling** | epoll/kqueue single | io_uring multi-thread | Higher throughput |

### 7.2 Táº¡i sao Hot Key váº«n lÃ  váº¥n Ä‘á»?

DÃ¹ Dragonfly nhanh hÆ¡n, **Hot Key váº«n lÃ  bottleneck** vÃ¬ quy luáº­t váº­t lÃ½:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ”¥ HOT KEY SERIALIZATION PROBLEM                           â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  âœ… UNIFORM DISTRIBUTION (100 keys, balanced)                                 â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â•‘
â•‘                                                                               â•‘
â•‘     â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”                                      â•‘
â•‘     â”‚Shard1â”‚ â”‚Shard2â”‚ â”‚Shard3â”‚ â”‚Shard4â”‚  â† PARALLEL PROCESSING               â•‘
â•‘     â”‚ 25%  â”‚ â”‚ 25%  â”‚ â”‚ 25%  â”‚ â”‚ 25%  â”‚                                      â•‘
â•‘     â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜                                      â•‘
â•‘                                                                               â•‘
â•‘     Result: Load distributed â†’ All cores utilized â†’ High throughput          â•‘
â•‘                                                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  âŒ HOT KEY PATTERN (90% traffic â†’ 1 key)                                    â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â•‘
â•‘                                                                               â•‘
â•‘     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”                        â•‘
â•‘     â”‚           Shard 1 (Hot Key)          â”‚ â”‚Othersâ”‚                        â•‘
â•‘     â”‚               90%                     â”‚ â”‚ 10% â”‚                        â•‘
â•‘     â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ â”‚ â”‚â–‘â–‘â–‘â–‘â–‘â”‚                        â•‘
â•‘     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜                        â•‘
â•‘                       â†‘                                                       â•‘
â•‘     âš ï¸ BOTTLENECK: Single shard/thread SATURATED                             â•‘
â•‘                                                                               â•‘
â•‘     Result: 1 thread does 90% work â†’ Other cores IDLE â†’ Limited throughput   â•‘
â•‘                                                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  ğŸ’¡ PHYSICS LESSON:                                                           â•‘
â•‘     DÃ¹ cÃ³ bao nhiÃªu threads, traffic vÃ o 1 key VáºªN PHáº¢I serialize            â•‘
â•‘     qua 1 thread owner cá»§a key Ä‘Ã³. ÄÃ¢y lÃ  giá»›i háº¡n cá»§a Amdahl's Law.         â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### 7.3 Giáº£i thÃ­ch cÃ¡c Anomaly

#### ğŸ” Redis Single Key Test - Táº¡i sao 15k, 20k, 22.5k RPS cÃ³ failure táº¡m thá»i?

![alt text](image-5.png)

**NguyÃªn nhÃ¢n cÃ³ thá»ƒ**:

| Anomaly | NguyÃªn nhÃ¢n | Táº¡i sao há»“i phá»¥c? |
|---------|-------------|-------------------|
| **15k spike** | JVM JIT Compilation | HotSpot optimize xong code path |
| **20k spike** | Connection Pool resize | Pool Ä‘Ã£ scale up Ä‘á»§ |
| **22.5k spike** | GC pause + TCP buffer | GC frequency á»•n Ä‘á»‹nh |
| **25k-27.5k stable** | System Ä‘áº¡t steady state | Táº¥t cáº£ Ä‘Ã£ warmup xong |

### 7.4 ğŸ“š BÃ i há»c tá»« Failure Patterns

![alt text](image-6.png)

| Pattern | ğŸ”´ Redis Behavior | ğŸŸ¢ Dragonfly Behavior | Implication |
|---------|-------------------|----------------------|-------------|
| **Threshold Breach** | Sudden collapse | Gradual degradation | DF cho thÃªm thá»i gian react |
| **Recovery** | KhÃ´ng tá»± há»“i phá»¥c | CÃ³ thá»ƒ recover | DF resilient hÆ¡n |
| **Cascading** | Hot key â†’ toÃ n bá»™ client bá»‹ áº£nh hÆ°á»Ÿng | Isolate tá»‘t hÆ¡n | DF giáº£m blast radius |

---

## 8. ğŸš€ Khuyáº¿n nghá»‹ Production

### 8.1 ğŸ“Š Capacity Planning Matrix

![alt text](image-7.png)

| Use Case | ğŸ”´ Redis Single Node | ğŸŸ¢ Dragonfly Single Node | ğŸ‘‰ Recommendation |
|:--------:|:--------------------:|:------------------------:|:-----------------:|
| **< 10,000 RPS** | âœ… Comfortable | âœ… Overkill | Redis Ä‘á»§ dÃ¹ng |
| **10,000 - 15,000 RPS** | âœ… Safe | âœ… Easy | Redis + Monitor |
| **15,000 - 20,000 RPS** | âš ï¸ Near limit | âœ… Safe | **Migrate to Dragonfly** |
| **20,000 - 25,000 RPS** | âŒ Need Cluster | âœ… Safe | Dragonfly recommended |
| **> 25,000 RPS** | âŒ Must Cluster | âš ï¸ Near limit | Cluster required |

### 8.2 ğŸ—ï¸ Architecture Recommendations

#### Tier 1: Simple Setup (< 15k RPS)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸŸ¢ SIMPLE SETUP                               â”‚
â”‚                    For: Startups, MVPs, Low traffic              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚   â”‚  Application â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚    Redis/    â”‚                     â”‚
â”‚   â”‚              â”‚         â”‚  Dragonfly   â”‚                     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                   â”‚                              â”‚
â”‚                                   â–¼                              â”‚
â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚                            â”‚   Sentinel   â”‚                     â”‚
â”‚                            â”‚    (HA)      â”‚                     â”‚
â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                  â”‚
â”‚   âœ… Low complexity                                              â”‚
â”‚   âœ… Sufficient for most startups                                â”‚
â”‚   âš ï¸ Single point of failure for throughput                     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Tier 2: Enhanced Setup (15k - 30k RPS)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸŸ¡ ENHANCED SETUP                             â”‚
â”‚                    For: Growing companies, Medium traffic        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚   â”‚  Application â”‚                                              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚          â”‚                                                       â”‚
â”‚          â–¼                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚   â”‚  ğŸ”¥ Local Cache  â”‚  â† Caffeine/Guava                        â”‚
â”‚   â”‚  (Hot Key Buffer)â”‚    Absorbs 30-50% traffic                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚            â”‚ Cache Miss                                          â”‚
â”‚            â–¼                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚   â”‚    Dragonfly     â”‚  â† Handles remaining traffic             â”‚
â”‚   â”‚   (Single Node)  â”‚    Up to 27.5k RPS                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚                                                                  â”‚
â”‚   âœ… Local cache absorbs burst & hot keys                       â”‚
â”‚   âœ… Reduces backend load significantly                          â”‚
â”‚   âš ï¸ Slight accuracy trade-off (acceptable for rate limiting)  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Tier 3: Enterprise Setup (> 30k RPS)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ”´ ENTERPRISE SETUP                           â”‚
â”‚                    For: High-scale, Mission critical             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚   â”‚  Application â”‚                                              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚          â”‚                                                       â”‚
â”‚          â–¼                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚   â”‚ L1: Local Cache  â”‚  â† Hot key protection                    â”‚
â”‚   â”‚   (Per Instance) â”‚    Token Bucket algorithm                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚            â”‚                                                     â”‚
â”‚            â–¼                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚        L2: Dragonfly/Redis Cluster       â”‚                  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚                  â”‚
â”‚   â”‚  â”‚ Node 1  â”‚ Node 2  â”‚ Node 3  â”‚  ...    â”‚                  â”‚
â”‚   â”‚  â”‚ (Shard) â”‚ (Shard) â”‚ (Shard) â”‚         â”‚                  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                  â”‚
â”‚   âœ… Linear horizontal scaling                                   â”‚
â”‚   âœ… Hot key mitigation via L1                                  â”‚
â”‚   âœ… High availability & fault tolerance                        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.3 ğŸ”¥ Hot Key Mitigation Strategies

![alt text](image-8.png)

| Strategy | Description | Accuracy | Throughput Gain | Complexity |
|:--------:|-------------|:--------:|:---------------:|:----------:|
| **ğŸ”µ Local Token Bucket** | Cho phÃ©p N req/s locally trÆ°á»›c khi check remote | 95-99% | 50-100% | Low |
| **ğŸŸ¢ Key Sharding** | ThÃªm random suffix: `key:0`, `key:1`, ... | 100% | Linear | Medium |
| **ğŸŸ¡ Write-Behind** | Batch local increments, flush periodically | 90-95% | 200-500% | Medium |
| **ğŸ”´ Probabilistic** | Chá»‰ check rate limit vá»›i probability P | ~PÃ—100% | 1/P | Low |

### 8.4 ğŸ“Š Monitoring & Alerting

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         ğŸ“Š MONITORING THRESHOLDS                              â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘   Metric           â”‚ ğŸŸ¢ Good      â”‚ ğŸŸ¡ Warning    â”‚ ğŸ”´ Critical   â”‚ Action    â•‘
â•‘   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•‘
â•‘   RPS              â”‚ < 70% cap    â”‚ 70-85% cap    â”‚ > 85% cap     â”‚ Scale     â•‘
â•‘   P99 Latency      â”‚ < 50ms       â”‚ 50-100ms      â”‚ > 100ms       â”‚ Investigateâ•‘
â•‘   Error Rate       â”‚ < 0.1%       â”‚ 0.1-1%        â”‚ > 1%          â”‚ Alert     â•‘
â•‘   CPU (Backend)    â”‚ < 60%        â”‚ 60-80%        â”‚ > 80%         â”‚ Scale     â•‘
â•‘   Memory           â”‚ < 70%        â”‚ 70-85%        â”‚ > 85%         â”‚ Tune TTL  â•‘
â•‘   Connections      â”‚ < 80% pool   â”‚ 80-95% pool   â”‚ > 95% pool    â”‚ Increase  â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### 8.5 ğŸ”„ Migration Checklist: Redis â†’ Dragonfly

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ“‹ MIGRATION CHECKLIST                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  PREPARATION                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â–¡ Compatibility Test: Cháº¡y test suite vá»›i Dragonfly backend                â”‚
â”‚  â–¡ Benchmark: So sÃ¡nh performance trÃªn staging environment                  â”‚
â”‚  â–¡ Documentation: Review Dragonfly-specific limitations                     â”‚
â”‚                                                                              â”‚
â”‚  CONFIGURATION                                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â–¡ Connection Pool: CÃ³ thá»ƒ tÄƒng pool size (DF xá»­ lÃ½ nhanh hÆ¡n)             â”‚
â”‚  â–¡ Timeout Settings: CÃ³ thá»ƒ giáº£m timeout (latency tháº¥p hÆ¡n)                â”‚
â”‚  â–¡ Persistence: Review RDB/AOF settings náº¿u cáº§n                            â”‚
â”‚                                                                              â”‚
â”‚  DEPLOYMENT                                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â–¡ Monitoring: Cáº­p nháº­t dashboard cho Dragonfly metrics                    â”‚
â”‚  â–¡ Rollback Plan: Giá»¯ Redis config Ä‘á»ƒ rollback náº¿u cáº§n                     â”‚
â”‚  â–¡ Canary Deploy: Chuyá»ƒn 5% traffic trÆ°á»›c, monitor 24h                     â”‚
â”‚  â–¡ Gradual Rollout: 5% â†’ 25% â†’ 50% â†’ 100%                                  â”‚
â”‚                                                                              â”‚
â”‚  VALIDATION                                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â–¡ Performance: Verify throughput & latency meet expectations              â”‚
â”‚  â–¡ Correctness: Rate limit accuracy unchanged                               â”‚
â”‚  â–¡ Stability: No memory leaks, connection issues after 48h                 â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. âœ… Káº¿t luáº­n

### 9.1 ğŸ”‘ Key Findings

![alt text](image-9.png)

<div align="center">

| # | Finding | Impact |
|:-:|---------|--------|
| 1ï¸âƒ£ | **Dragonfly vÆ°á»£t trá»™i vá» Throughput** | +37% capacity cho Uniform, +29% cho Hot Key |
| 2ï¸âƒ£ | **Dragonfly vÆ°á»£t trá»™i vá» Latency** | 2-7x faster P99 latency á»Ÿ cÃ¹ng má»©c load |
| 3ï¸âƒ£ | **Dragonfly Resilient hÆ¡n** | Graceful degradation vs catastrophic collapse |
| 4ï¸âƒ£ | **Hot Key lÃ  káº» thÃ¹ chung** | Multi-layer rate limiting lÃ  báº¯t buá»™c |

</div>

### 9.2 ğŸ“‹ Decision Matrix

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         ğŸ¯ FINAL RECOMMENDATION                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘  ğŸ’¬ "TÃ´i Ä‘ang dÃ¹ng Redis vÃ  throughput < 15k RPS"                            â•‘
â•‘  âœ âœ… Giá»¯ nguyÃªn Redis, khÃ´ng cáº§n thay Ä‘á»•i                                   â•‘
â•‘                                                                               â•‘
â•‘  ğŸ’¬ "TÃ´i Ä‘ang dÃ¹ng Redis vÃ  throughput 15k-20k RPS"                          â•‘
â•‘  âœ ğŸŸ¡ CÃ¢n nháº¯c migrate sang Dragonfly Ä‘á»ƒ cÃ³ headroom                         â•‘
â•‘                                                                               â•‘
â•‘  ğŸ’¬ "TÃ´i Ä‘ang dÃ¹ng Redis vÃ  throughput > 20k RPS"                            â•‘
â•‘  âœ ğŸ”´ KHUYáº¾N NGHá»Š Máº NH: Migrate sang Dragonfly hoáº·c Redis Cluster           â•‘
â•‘                                                                               â•‘
â•‘  ğŸ’¬ "TÃ´i Ä‘ang setup má»›i vÃ  expect traffic cao"                               â•‘
â•‘  âœ ğŸŸ¢ Báº¯t Ä‘áº§u vá»›i Dragonfly tá»« Ä‘áº§u - drop-in replacement, no regrets        â•‘
â•‘                                                                               â•‘
â•‘  ğŸ’¬ "TÃ´i cÃ³ Hot Key problem"                                                 â•‘
â•‘  âœ âš ï¸ Dragonfly giÃºp, nhÆ°ng PHáº¢I cÃ³ Local Cache layer                       â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### 9.3 ğŸ† Final Verdict

![alt text](image-10.png)

| Criteria | Winner | Score/Detail |
|:--------:|:------:|--------------|
| **ğŸ“ˆ Raw Throughput** | ğŸ† Dragonfly | 37% higher |
| **âš¡ Latency** | ğŸ† Dragonfly | 2-7x better |
| **ğŸ›¡ï¸ Resilience** | ğŸ† Dragonfly | Graceful degradation |
| **ğŸ”„ Compatibility** | ğŸ¤ Tie | Both Redis protocol |
| **ğŸ“š Ecosystem** | ğŸ† Redis | More mature, more tools |
| **ğŸ‘¥ Community** | ğŸ† Redis | Larger, more resources |
| **ğŸ”§ Operational** | ğŸ¤ Tie | Both simple single-node |
| **ğŸ’° Cost** | ğŸ¤ Tie | Both open source |
| **ğŸ”¥ Hot Key Handling** | ğŸ† Dragonfly | Better isolation |

<div align="center">

### ğŸ–ï¸ Overall Winner: **DRAGONFLY**
*cho use-case Rate Limiting high-throughput*

</div>

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                               â•‘
â•‘   ğŸ’¡ BOTTOM LINE                                                              â•‘
â•‘   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â•‘
â•‘                                                                               â•‘
â•‘   "Náº¿u báº¡n Ä‘ang cháº¡m ngÆ°á»¡ng 15-20k RPS trÃªn Redis vÃ  Ä‘ang cÃ¢n nháº¯c           â•‘
â•‘    Redis Cluster, hÃ£y thá»­ Dragonfly trÆ°á»›c.                                    â•‘
â•‘                                                                               â•‘
â•‘    NÃ³ cÃ³ thá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» performance ngay láº­p tá»©c (Vertical Scaling)   â•‘
â•‘    mÃ  khÃ´ng cáº§n thay Ä‘á»•i topology phá»©c táº¡p (Horizontal Scaling)."            â•‘
â•‘                                                                               â•‘
â•‘                                                   - Rate Limit Benchmark Team â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ“ Appendix

### A. Test Artifacts

| Artifact | Location |
|----------|----------|
| Redis Single Key Report | `single-node-redis/single_key_20260127_214303/` |
| Redis 100 Keys Uniform Report | `single-node-redis/hundred_keys_20260128_071830/` |
| Redis 100 Keys Hot Report | `single-node-redis/hundred_keys_hot_20260201_184238/` |
| Dragonfly 100 Keys Uniform Report | `single-node-dragonfly/hundred_keys_20260204_12345/` |
| Dragonfly 100 Keys Hot Report | `single-node-dragonfly/hundred_keys_hot_20260204_184238/` |

### B. Infrastructure Configuration

| File | Purpose |
|------|---------|
| `single-node-benchmark/docker-compose.yml` | Redis test environment |
| `dragonfly-single-node-benchmark/docker-compose.yml` | Dragonfly test environment |
| `*/envoy.yaml` | Load balancer config |
| `*/prometheus.yml` | Metrics collection |
| `*/grafana/dashboards/benchmark.json` | Visualization |

### C. Reproducing Results

```bash
# 1. Start Redis benchmark environment
cd single-node-benchmark
docker compose up -d

# 2. Run benchmark (example: 100 keys uniform)
cd client
./gradlew run --args="localhost:9091 key 8 60 5" \
  -PmainClass=com.example.ratelimit.client.HundredKeyBenchmark

# 3. Start Dragonfly benchmark environment  
cd ../../dragonfly-single-node-benchmark
docker compose up -d

# 4. Run same benchmark against Dragonfly
cd client
./gradlew run --args="localhost:9091 key 8 60 5" \
  -PmainClass=com.example.ratelimit.client.HundredKeyBenchmark

# 5. View results in Grafana
open http://localhost:3000
```

### D. Glossary

| Term | Definition |
|------|------------|
| **RPS** | Requests Per Second |
| **P99 Latency** | 99th percentile latency (99% of requests complete faster) |
| **Hot Key** | A single key receiving disproportionate traffic |
| **Graceful Degradation** | System performance declines gradually under load |
| **Circuit Breaker** | Pattern to prevent cascade failures |
| **Token Bucket** | Rate limiting algorithm using tokens |

---

<div align="center">

**ğŸ“Š Rate Limit Benchmark Report**  
*Comparing Redis vs Dragonfly for High-Throughput Rate Limiting*

---

**Â© 2026 Rate Limit Benchmark Team**  
*Document generated: February 5, 2026*

![Made with Love](https://img.shields.io/badge/Made%20with-â¤ï¸-red?style=for-the-badge)
![Powered by PhongHV](https://img.shields.io/badge/Powered%20by-Data-blue?style=for-the-badge)

</div>
